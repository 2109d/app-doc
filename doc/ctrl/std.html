<div class="row" data-app-motion>
  <div class="col-12"><h2 class="h4">컨트롤러 기본기능</h2></div>

  <div class="col-12">
    컨트롤러는 각각 뷰(<b class="badge">view</b>), 팝업(<b class="badge">popup</b>),
    콤포넌트(<b class="badge">component</b>) 3종류가 존재 하며,
    app를 통해 컨트롤러를 등록 후 사용한다. 등록된 컨트롤러는 싱글톤(singleton)으로
    중복 사용할 수 없다. 컨트롤러의 사용은 app의 <b class="badge">get</b>메소드를 통해 전달 받을 수 있다.
    <div class="alert alert-secondary mt-3">
<pre data-bind="jscode">
// 뷰 컨트롤러 등록
app.view('viewName', function(ctrl) {
  // 팝업 컨트롤러 취득
  var popupName = app.get('popupName');
});

// 팝업 컨트롤러 등록
app.popup('popupName', function(ctrl) {});
</pre>
    </div>
  </div>

  <!-- 뷰 -->
  <div class="col-12 mt-3">
    <div class="font-weight-bold">뷰<b class="badge text-primary">view( name:string, prodecure:function )</b></div>
    이미 랜더링된 영역을 컨트롤 할때 사용한다.
    화면의 <b class="badge">data-app-view="ctrl-name"</b>(스네이크 표기법 사용) 속성에 반응하며,
    app의 <b class="badge">view('ctrlName', function)</b>(카멜 표기법 사용)으로 등록한다.
    <div class="alert alert-secondary mt-3">
<pre data-bind="htmlcode">
<div data-app-view="view-name"></div>
</pre>
<pre data-bind="jscode">
app.view('viewName', function(ctrl, param) {});
</pre>
    </div>
  </div>

  <!-- 팝업 -->
  <div class="col-12 mt-3">
    <div class="font-weight-bold">팝업<b class="badge text-primary">popup( name:string, prodecure:function )</b></div>
    별도의 공간에 레이어 생성 후 랜더링된 영역을 컨트롤 할때 사용한다.
    레이아웃 생성시 <b class="badge">data-app-popup="ctrl-name"</b>(스네이크 표기법 사용) 속성으로 생성되며,
    app의 <b class="badge">popup('ctrlName', function)</b>(카멜 표기법 사용)으로 등록한다.
    <div class="alert alert-secondary mt-3">
<pre data-bind="htmlcode">
<div data-app-resource>
  <div data-app-popup="popup-name"></div>
</div>
</pre>
<pre data-bind="jscode">
app.popup('popupName', function(ctrl, param) {});
</pre>
    </div>
  </div>

  <!-- 콤포넌트 -->
  <div class="col-12 mt-3">
    <div class="font-weight-bold">콤포넌트<b class="badge text-primary">component( name:string, prodecure:function )</b></div>
    view또는 popup 컨트롤러 안에서 동작하는 영역을 컨트롤 할때 사용한다.
    화면상의 콤포넌트 영역은 주석을 이용하여 콤포넌트의 영역을 지정 하며,
    시작<b class="badge">&lt;!-- ko component:'ctrl-name' --&gt;</b>(스네이크 표기법 사용)
    종료<b class="badge">&lt;!-- /ko --&gt;</b> 사이에 랜더링 된다.
    app의 <b class="badge">component('ctrlName', function)</b>(카멜 표기법 사용)으로 등록한다.
    <div class="alert alert-secondary mt-3">
<pre data-bind="htmlcode">
<div data-app-view="view-name">
  <!-- ko component:'comp-name' -->
  콤포넌트의 랜더링 영역
  <!-- /ko -->
</div>
</pre>
<pre data-bind="jscode">
app.component('compName', function(ctrl, param) {});
</pre>
    </div>
  </div>

  <div class="col-12 mt-5"><h2 class="h4">오픈과 종료</h2></div>
  <!-- 오픈 -->
  <div class="col-12 mt-3">
    <div class="font-weight-bold">오픈<b class="badge text-primary">open(ctrl:Controller, [param:object]) :promise</b></div>
    app로 부터 컨트롤러를 얻어와서 사용한다. 첫번째 매개변수에 오픈하려는 컨트롤러 객체를 넘겨 주며,
    두번째 매개변수값에 파라메터값을 전달 할수 있다.
    open메소드는 Promise를 반환하며, 오픈한 컨트롤러가 종료시 이벤트를 받을 수 있다.
  </div>
  <!-- 종료 -->
  <div class="col-12 mt-3">
    <div class="font-weight-bold">종료<b class="badge text-primary">close(result:object, [motion:promise])</b></div>
    오픈한 컨트롤러를 종료할때 사용하며, 첫번째 매개변수에 결과물을 결과물을 전달할 수 있다.
    두번째 매개변수값은 애니메이션(<b class="badge">data-app-motion</b>)을 사용할 경우 애니매에션의 종료 시점을 알려 준다.
  </div>
  <div class="col-12 mt-3">
    <div class="alert alert-secondary mt-3">
<pre data-bind="jscode">
// 뷰 컨트롤러
app.view('viName', function(ctrl) {
  // 팝업컨트롤러 취득
  var popName = app.get('popName');

  ctrl.on.openPopup = ctrl.handler()
  .event('click', function(evt) {
    var param = {type: 'view'};
    // 팝업컨트롤러 오픈
    popName.open(ctrl, param).then(function(result) {
      // 팝업종료시 전달된 결과물
      ctrl.log('popName close:', result);
    });
  });
});

// 팝업 컨트롤러
app.popup('popName', function(ctrl, param) {
  // 팝업 로드 완료
  ctrl.onload(function() {
    ctrl.log('popName onload:', param);
  });

  ctrl.on.close = ctrl.handler()
  .event('click', function(evt) {
    var result = {type: 'view'};
    // 팝업을 종료 하며, 결과물을 오픈한 대상에 넘겨 준다.
    ctrl.close(result);
  });
});
</pre>
    </div>
  </div>

</div>

